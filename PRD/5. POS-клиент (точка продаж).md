POS-клиент (точка продаж)

Платформа POS: Кассовое приложение реализуется как desktop-приложение для Windows, созданное с использованием Electron (веб-технологии внутри настольного приложения). Это позволит использовать единый стек (JavaScript/HTML/CSS) и совместную кодовую базу с веб-версией, но при этом получить доступ к локальным ресурсам (файловая система, устройство печати) и устанавливать приложение на Windows-терминалы.

Оффлайн-режим: Критическое требование – POS должен работать без постоянного интернета. Все основные операции (регистрация продаж, возвратов, открытие/закрытие смен) выполняются локально даже при отсутствии сети. Для этого в POS-клиенте используется локальная база данных (SQLite) для хранения настроек, каталога товаров и очереди транзакций.

При появлении интернета происходит синхронизация с облаком: продажи и другие изменения, сделанные оффлайн, отправляются на сервер, и наоборот – обновления (например, новые товары или изменения цен, проведённые через веб-интерфейс) загружаются на клиент.

Реализован механизм Outbox/Inbox: на POS изменения пишутся в локальный Outbox, а фоновые задачи отправляют их на сервер. Серверные обновления кладутся в локальный Inbox для применения на клиенте.

Конфликты решаются по принципу «last write wins» для продаж (последняя операция считается актуальной, хотя обычно конфликты маловероятны для транзакций продаж) и по определённым правилам для справочников (например, если один товар параллельно редактировали на двух кассах, сервер может оставить последнюю версию или объединить изменения полей, если они разные).

Такой подход аналогичен решениям конкурентов, где POS продолжает работу даже без интернета
moysklad.uz
, обеспечивая непрерывность продаж.

Интерфейс и UX кассы:

POS-интерфейс должен быть максимально простым и быстрым для кассира. Операции продажи должны выполняться минимальным числом кликов/действий.

Сканирование штрих-кодов: Поддерживается ввод товара сканером штрих-кодов – при сканировании курсор не должен отвлекать кассира (например, скрытое поле ввода), товар мгновенно добавляется в чек. Это ускоряет работу и снижает ошибки.

Горячие клавиши: Предусмотреть сочетания клавиш для основных действий (новый чек, поиск товара, применение скидки, выбор способа оплаты, печать копии чека и т.д.), чтобы опытные пользователи могли работать не трогая мышь. Особое внимание – работе с клавиатурой, т.к. многие кассиры предпочитают быстрые нажатия клавиш.

Макет экрана: На экране кассы должно отображаться:

Список товаров в текущем чеке (с ценами, количеством, суммами и скидками) – обычно справа либо снизу, чтобы постоянно быть на виду.

Область поиска/сканирования товара и быстрые кнопки товарных категорий или популярных товаров – слева, для добавления позиций.

Итоги по чеку (итого, скидки, налоги) и выбранный способ оплаты – обычно внизу, крупно выделено.

Кнопки действий: Завершить продажу, Отмена/очистка чека, Применить скидку, Возврат и т.п. – крупные кнопки, удобные для тач-экрана.

Быстрые операции: Добавить поддержку быстрого сканирования дисконтной карты клиента (или ввода номера телефона) для применения программы лояльности, быстрый ввод суммы наличными (например, кнопки "50,000 сум", "100,000 сум" для быстрого выбора сдачи).

Удобство для кассира: Интерфейс кассы рассчитан на сенсорные экраны и различные разрешения, минимальный размер интерактивных элементов – 40px (для пальца). Цветовая схема – нейтральная, не утомляющая глаза при длительной работе, с возможностью ночного режима (dark theme) для работы вечером.

Поддержка оборудования: POS-клиент должен интегрироваться с типичным торговым оборудованием:

Фискальный регистратор/принтер – подключение к локальному драйверу или через fiscal-gateway для печати чеков. Приложение должно уметь печатать чеки на 80мм термоленте, используя шаблоны ESC/POS. Для Узбекистана – поддержка принтеров, сертифицированных в стране.

Сканер штрих-кодов – обычно подключается как клавиатура (key input) или через USB/COM. Система должна обрабатывать скан ввода так же, как ручной ввод кода товара.

Денежный ящик – открытие ящика синхронизируется с печатью чека (через команду принтера kick-out или напрямую, если поддерживается).

Электронные весы – (опционально) для магазинов, торгующих весовыми товарами, предусмотреть интеграцию с весами: считывание веса товара напрямую или обработка штрих-кода с весовым кодом.

Платёжный терминал – на первом этапе интеграция может быть не автоматизирована (кассир вручную пробивает сумму на банковском терминале). В перспективе, если банки предоставят API или через партнёров (Payme, Click), можно реализовать связь POS с терминалом по локальной сети для автоматической отправки суммы на оплату. Пока это обозначается как будущее улучшение.

Обновления и поддержка: POS-клиент должен получать обновления (например, через авто-обновление Electron приложения) с минимальным участием пользователя. В случае отсутствия интернета, он продолжает работать на старой версии, а обновление применяется при следующем соединении