Финансы и кассовые операции

Кассовая книга: Система должна автоматически формировать кассовую книгу по каждому магазину/кассе – т.е. полный список всех движений наличности за день/смену:

Начальный остаток (при открытии смены).

Поступления от продаж (каждый наличный чек суммой).

Возвраты наличные (вычитаются).

Внесения/изъятия.

Итог на конец дня (который должен совпасть с фактом).

Эти данные выводятся в отчёте (Z-отчёт) и сохраняются для бухгалтерского учёта предприятия. Формально, для небольших бизнесов возможно ведение упрощённое, но если потребуется – экспорт кассовой книги за период для бухгалтерии.

Учёт доходов и расходов: Внутренняя подсистема учёта (бухгалтерии) записывает проводки при каждом финансово значимом событии:

Продажа: Дт "Касса" / Кт "Выручка от продаж" (грубо говоря, и списание товара: Дт "Себестоимость продаж" / Кт "Товар на складе").

Закупка: Дт "Товар на складе" / Кт "Расчёты с поставщиком".

Оплата поставщику: Дт "Расчёты с поставщиком" / Кт "Деньги".

И т.д. – полный бухгалтерский учёт пока не обязателен, но двойная запись заложена для последующего получения финансовых отчётов (баланс, P&L) внутри системы.

Важно: Мы не стремимся в MVP выдать полностью регламентированную бух. отчетность, но движение средств и товаров взаимосвязано и должно консистентно учитываться.

Взаиморасчёты с поставщиками и клиентами:

Поставщики: У каждого поставщика можно отслеживать баланс задолженности. Когда проводим приходную накладную с типом оплаты "Отсрочка" – система увеличивает долг перед поставщиком. Когда фиксируем факт оплаты поставщику (через отдельную операцию «оплата поставщику» или отмечая накладную оплаченой) – долг гасится. Пользователь (бухгалтер/менеджер) может видеть список задолженностей по всем поставщикам.

Клиенты (долги покупателей): В рознице, как правило, нет продаж в долг. Но если вдруг предусмотрена работа с некоторыми постоянными клиентами по постоплате (например, корпоративный клиент покупает товары и оплачивает раз в месяц по счету) – можно вести учет дебиторской задолженности аналогичным образом. В MVP, вероятно, не востребовано, но можно иметь базовый функционал: документ "Реализация в кредит" и "Платёж от клиента".

Оплаты и платежи:

Наличные: фиксируются по кассе (как описано).

Эквайринг (карты): Каждая продажа по безналу отмечается как оплата картой. В кассовой смене они суммируются отдельно. Взаимодействие с банком может быть ручным (кассир сам провёл терминал, результат просто отметили). Должна быть возможность сверять суммы терминала и системы в конце дня. Возможно, в отчёте – отдельная секция «безнал по терминалу».

Переводы (электронные кошельки): В Узбекистане популярны платежи через Click, Payme и др. Если магазин принимает оплату через сканирование QR кода (клиент сканирует и платит) – кассир по факту просто отмечает чек как оплачен по переводу. Желательно, чтобы система могла генерировать QR для оплаты на кассе, но это требует интеграции с Payme/Click API. В MVP, скорее всего, это вне скопа, поэтому просто учитываем как тип оплаты "Перевод/QR оплата" (вручную).

Смешанная оплата: Поддерживаем частичную оплату разными способами. Например, клиент часть наличными, часть картой. Интерфейс оплаты позволяет добавить несколько строк оплаты (тип и сумма). Контролируем, чтобы общая сумма оплаты равнялась итогу чека.

Возврат оплаты: При возврате товара – если оплата была наличными, кассир выдаёт наличные из кассы (и это отражается в книге как расход). Если оплата была по карте, обычно возврат делается на карту – тут кассир отмечает, что возврат по карте (и на терминале проводит сторно). Система должна учесть это, чтобы корректно отражалось в смене (уменьшение безнала).

Без интеграции с внешней бухгалтерией: Подчеркнём, что интеграция с 1C или другими бухгалтерскими системами не нужна в рамках MVP. Идея продукта – пользователь получает все необходимые отчёты из нашей системы, чтобы не вести отдельный бухгалтерский учёт.

Однако, для продвинутых пользователей, можно экспортировать данные: например, выгрузка в Excel/CSV регистра продаж, движений по складу или оборотно-сальдовой ведомости. Возможно, PDF-отчёты баланса/прибыли. Но сам факт – закладываем, что наша система сама ведёт учёт всех приходов и расходов и отображает все транзакции и отчёты по ним.

Проводки и аудит: Все финансовые действия порождают проводки (как упомянуто) и сохраняются в неизменяемом журнале аудита. Это важно для доверия к системе: любое изменение или задним числом правка – либо невозможна, либо фиксируется. Например, если администратор решит удалить чек (чего делать нельзя, возврат вместо удаления), то в системе это должно отразиться. В MVP удаление финансовых документов лучше запретить совсем.

Разделение по юр.лицам: Если бизнес имеет несколько юридических лиц, могло бы потребоваться разделять фин.учёт. В MVP предполагаем, что один бизнес (tenant) = одно юрлицо, и все чеки и документы выписываются от его имени. Если нужно другое – можно завести отдельный аккаунт. (В дальнейшем можно развить, но пока не усложняем.)

Отчёты финансовые:

Отчёт о продажах (выручка) за период – сколько наличных, сколько безнала, возвраты, итог.

Отчёт о прибыли – валовая прибыль = выручка - себестоимость, по периодам/по товарам.

Движение денежных средств – похоже на кассовую книгу, но объединяет все способы оплаты: сколько денег поступило (наличные, на счёт – если фиксируем платежи) и сколько выбыло.

Баланс взаиморасчётов с поставщиками – список поставщиков и сколько мы должны (и просрочка, если есть).

Баланс по кассе/счёту – сколько денег в кассе фактически и по учёту.

Прочие доходы/расходы: если магазин учитывает расходы (аренда, зарплата) – это вне нашего скопа, т.е. управленческий учёт расходов пока не делаем. Счета-фактуры, НДС-отчётность – тоже вне скопа (так как бух интеграции нет)